{% extends "layout.html" %}

{% block title %}CMDB | 用户管理{% endblock %}
{% block nav_users %}class="active"{% endblock %}
{% block nav_users_list %}class="active"{% endblock %}
{% block breadcrumb %}
<li>
    <a href="javascript:void(0)">用户</a>
</li>
<li class="active">
    <strong>用户管理</strong>
</li>
{% endblock %}
{% block content %}

 <a href="/user/create/" class="btn btn-primary" role="button">添加用户</a>
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary " data-toggle="modal" data-target="#user_create">
  用户创建
</button>

<!-- Modal -->
<div class="modal fade" id="user_create" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">用户信息</h4>
      </div>
      <div class="modal-body">
          <form method="post" class="form-horizontal create_form" role="form" action="/user/save/" >


                                <!-- 用户名代码块-->
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">用户名</label>
                                    <div class="col-sm-10">
                                        <input class="form-control" type="text"  placeholder="username" name="username" value="{{username}}">
                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>

                                <!-- 年龄代码块-->
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">年龄</label>
                                    <div class="col-sm-10">
                                        <input class="form-control" type="text" placeholder="age" name="age" value="{{age}}">
                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>

                                <!-- 密码代码块-->
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">Password</label>
                                    <div class="col-sm-10">
                                        <input class="form-control" name="password" type="password" placeholder="请输入密码" name="password" value="{{password}}"/>
                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>
                                <!-- 密码代码块-->

                                <!-- 邮箱代码块 -->
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">Email</label>
                                    <div class="col-sm-10"><input class="form-control" name="email" type="email"></div>
                                </div>
                                <div class="hr-line-dashed"></div>
                                <!-- 邮箱代码块 -->

                                <!--电话代码块-->
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">电话</label>
                                    <div class="col-sm-10"><input class="form-control" name="phone" type="text"></div>
                                </div>
                                <div class="hr-line-dashed"></div>
                                <!--电话代码块-->

                                <!-- 部门代码块-->
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">部门</label>
                                    <div class="col-sm-10">
                                        <select class="form-control m-b" name="department">
                                            <option value="1">研发部</option>
                                            <option value="2">产品部</option>
                                            <option value="3" selected="selected">运维部</option>
                                            <option value="4">其他</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>

                                <!-- 性别代码块 -->
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">性别:</label>
                                    <div class="col-sm-10">
                                            <input type="radio" name="sex" value="1" checked="checked" />男
                                            <input type="radio" name="sex" value="0" />女
                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>
                                <!--性别代码块 -->

                                <!-- 爱好代码块 -->
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">爱好</label>
                                    <div class="col-sm-10">
                                        <input type="checkbox" name="hobby" value="football"/>足球
                                        <input type="checkbox" name="hobby" value="basketball" checked="checked"/>篮球
                                        <input type="checkbox" name="hobby" value="pingpong" checked="checked" />乒乓球
                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>

                                <!-- 爱好代码块 -->

                                <!-- 个人简介  -->
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">简介</label>
                                    <div class="col-sm-10">
                                          <textarea name="detail">XXXXX</textarea>
                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>
                                <!-- 个人简介  -->

                                <!-- 头像 -->
                            <div class="form-group">
                                    <label class="col-sm-2 control-label">头像:</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" name="icon"/>
                                    </div>
                            </div>
                                <div class="hr-line-dashed"></div>
                                <!-- 头像 -->

                                <!-- 主页-->
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">主页:</label>
                                    <div class="col-sm-10">
                                        <input type="url" class="form-control" name="homepage" value="{{homepage}}" />
                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>
                                <!-- 主页-->

                                <!-- 出生日期  -->
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">出生日期:</label>
                                    <div class="col-sm-10">
                                        <input type="date" class="form-control" name="birthday" value="{{birthday}}" />
                                    </div>
                                </div>
                                <!--<div class="hr-line-dashed"></div>-->
                                <!-- 出生日期  -->

                                <!-- 错误信息回显 -->
                                {% if error %}
                                 <div class="form-group alert alert-danger" role="alert">
                                     {{error}}
                                 </div>
                                {% endif %}

                                <!--<div class="hr-line-dashed"></div>-->
                                <!--<div class="form-group">-->
                                    <!--<div class="col-sm-4 col-sm-offset-2">-->
                                        <!--<button class="btn btn-white" type="submit">取消</button>-->
                                        <!--<button class="btn btn-primary" type="submit">提交</button>-->
                                    <!--</div>-->
                                <!--</div>-->
                            </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="create_btn btn btn-primary">添加</button>
      </div>
    </div>
  </div>
</div>

        <table class="table table-striped table-bordered table-hover dataTables-example">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>用户名</th>
                    <th>年龄</th>
                    <th>密码</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                    <tr>
                        <td>{{user['id']}}</td>
                        <td>{{user['name']}}</td>
                        <td>{{user['age']}}</td>
                        <td>******</td>
                        <td>
                            <a href="/user/view/?id={{user['id']}}">编辑</a>
                            <!--<a href="/user/delete/?id={{user['id']}}">删除</a>-->
                            <a href="javascript:void(0);" data-id="{{user['id']}}" class="btn_delete1">删除</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>

        </table>


{% endblock %}

{% block link %}

    <link href="/static/sfv/css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
    <link href="/static/sfv/css/plugins/dataTables/dataTables.responsive.css" rel="stylesheet">
    <link href="/static/sfv/css/plugins/dataTables/dataTables.tableTools.min.css" rel="stylesheet">

    <link href="/static/sfv/css/animate.css" rel="stylesheet">
    <link href="/static/sfv/css/style.css" rel="stylesheet">
{% endblock %}
{% block style %} {% endblock%}

{% block script %}

    <!-- Data Tables -->
<script src="/static/sfv/js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="/static/sfv/js/plugins/dataTables/dataTables.bootstrap.js"></script>
<script src="/static/sfv/js/plugins/dataTables/dataTables.responsive.js"></script>
<script src="/static/sfv/js/plugins/dataTables/dataTables.tableTools.min.js"></script>

{% endblock %}

{% block js %}
       $(document).ready(function() {
            $('.dataTables-example').dataTable({
                responsive: true,
                "dom": 'T<"clear">lfrtip',
                "tableTools": {
                    "sSwfPath": "/static/sfv/js/plugins/dataTables/swf/copy_csv_xls_pdf.swf"
                }
            });

            jQuery(document).on('click','.create_btn',function(){

            jQuery.post('/user/save/json/',
                jQuery('.create_form').serializeArray(),
            function (data) {
               if(data['code'] === 200 ){
                    window.location.reload();
                } else if (data['code'] === 400){
                    alert(data['error']);
                    }
                },'json');
            });

        jQuery(document).on('click','.btn_delete1', function() {
            //发起请求
        var url = '/user/delete/?id=' + jQuery(this).data('id');
        if(confirm('确定删除吗?')) {
            window.location.replace(url);
        }
    });


});


{% endblock %}


<!-- ！============================================================== -->
<!--&lt;!&ndash;                    &ndash;&gt;-->
<!--<!DOCTYPE html>-->
<!--<html>-->

<!--<head>-->

    <!--<meta charset="utf-8">-->
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->

    <!--<title>CMDB | 用户管理</title>-->

    <!--<link href="/static/sfv/css/bootstrap.min.css" rel="stylesheet">-->
    <!--<link href="/static/sfv/font-awesome/css/font-awesome.css" rel="stylesheet">-->
    <!--<link href="/static/sfv/css/plugins/iCheck/custom.css" rel="stylesheet">-->
    <!--<link href="/static/sfv/css/animate.css" rel="stylesheet">-->
    <!--<link href="/static/sfv/css/style.css" rel="stylesheet">-->

    <!--<link href="/static/sfv/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" rel="stylesheet">-->

<!--</head>-->

<!--<body>-->

    <!--<div id="wrapper">-->

    <!--<nav class="navbar-default navbar-static-side" role="navigation">-->
        <!--<div class="sidebar-collapse">-->
            <!--<ul class="nav metismenu" id="side-menu">-->
                <!--<li class="nav-header">-->
                    <!--<div class="dropdown profile-element"> <span>-->
                            <!--<img alt="image" class="img-circle" src="/static/sfv/img/profile_small.jpg" />-->
                             <!--</span>-->
                        <!--<a data-toggle="dropdown" class="dropdown-toggle" href="#">-->
                            <!--<span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">-->
                                <!--{{session.get('user', {}).get('username', '')}}</strong>-->

                    <!--</div>-->
                    <!--<div class="logo-element">-->
                      <!--CMDB-->
                    <!--</div>-->
                <!--</li>-->
                <!--<li>-->
                    <!--<a href="index.html"><i class="fa fa-th-large"></i> <span class="nav-label">Dashboards</span> <span class="fa arrow"></span></a>-->
                    <!--<ul class="nav nav-second-level collapse">-->
                        <!--<li><a href="index.html">Dashboard v.1</a></li>-->
                    <!--</ul>-->
                <!--</li>-->
                <!--<li>-->
                    <!--<a href="layouts.html"><i class="fa fa-diamond"></i> <span class="nav-label">Layouts</span></a>-->
                <!--</li>-->
            <!--<li class="active">-->
                <!--<a href="javascript:void(0);"><i class="fa fa-users"></i> <span class="nav-label">用户</span> <span class="fa arrow"></span></a>-->
                <!--<ul class="nav nav-second-level collapse">-->
                    <!--<li class="active"><a href="/users/">用户管理</a></li>-->
                <!--</ul>-->
            <!--</li>-->

            <!--</ul>-->

        <!--</div>-->
    <!--</nav>-->

        <!--<div id="page-wrapper" class="gray-bg">-->
        <!--<div class="row border-bottom">-->
        <!--<nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">-->
        <!--<div class="navbar-header">-->
            <!--<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>-->
            <!--<form role="search" class="navbar-form-custom" action="search_results.html">-->
                <!--<div class="form-group">-->
                    <!--<input type="text" placeholder="Search for something..." class="form-control" name="top-search" id="top-search">-->
                <!--</div>-->
            <!--</form>-->
        <!--</div>-->
            <!--<ul class="nav navbar-top-links navbar-right">-->
            <!--<li>-->
                <!--<span class="m-r-sm text-muted welcome-message">Welcome to CMDB</span>-->
            <!--</li>-->
                <!--<li>-->
                    <!--<a href="/logout/">-->
                        <!--<i class="fa fa-sign-out"></i>退出登录-->
                    <!--</a>-->

                <!--</li>-->
            <!--</ul>-->

        <!--</nav>-->
        <!--</div>-->
            <!--<div class="row wrapper border-bottom white-bg page-heading">-->
                <!--<div class="col-lg-10"></br>-->

                    <!--<ol class="breadcrumb">-->
                        <!--<li>-->
                            <!--<a href="index.html" >用户</a>-->
                        <!--</li>-->

                        <!--<li class="active">-->
                            <!--<strong>用户管理</strong>-->
                        <!--</li>-->
                    <!--</ol>-->
                <!--</div>-->
                <!--<div class="col-lg-2">-->

                <!--</div>-->
            <!--</div>-->
        <!--<div class="wrapper wrapper-content animated fadeInRight">-->
      <!--<div class="row">-->
    <!--<div class="col-md-12">-->
    <!--<a href="/user/create/" class="btn btn-primary" role="button">添加用户</a><br/><br/>-->
        <!--<table class="table table-striped table-bordered table-hover">-->
            <!--<thead>-->
                <!--<tr>-->
                    <!--<th>ID</th>-->
                    <!--<th>用户名</th>-->
                    <!--<th>年龄</th>-->
                    <!--<th>密码</th>-->
                    <!--<th>操作</th>-->
                <!--</tr>-->
            <!--</thead>-->
            <!--<tbody>-->
                <!--{% for user in users %}-->
                    <!--<tr>-->
                        <!--<td>{{user['id']}}</td>-->
                        <!--<td>{{user['name']}}</td>-->
                        <!--<td>{{user['age']}}</td>-->
                        <!--<td>******</td>-->
                        <!--<td>-->
                            <!--<a href="/user/view/?id={{user['id']}}">编辑</a>-->
                            <!--<a href="/user/delete/?id={{user['id']}}">删除</a>-->
                        <!--</td>-->
                    <!--</tr>-->
                <!--{% endfor %}-->
            <!--</tbody>-->
        <!--</table>-->
    <!--</div>-->
<!--</div>-->

<!--</div>-->
        <!--<div class="footer">-->
            <!--<div>-->
                <!--<strong>Copyright</strong> Example Company &copy; 2014-2017-->
            <!--</div>-->
        <!--</div>-->

        <!--</div>-->
        <!--</div>-->


    <!--&lt;!&ndash; Mainly scripts &ndash;&gt;-->
    <!--<script src="/static/sfv/js/jquery-2.1.1.js"></script>-->
    <!--<script src="/static/sfv/js/bootstrap.min.js"></script>-->
    <!--<script src="/static/sfv/js/plugins/metisMenu/jquery.metisMenu.js"></script>-->
    <!--<script src="/static/sfv/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>-->

    <!--&lt;!&ndash; Custom and plugin javascript &ndash;&gt;-->
    <!--<script src="/static/sfv/js/inspinia.js"></script>-->
    <!--<script src="/static/sfv/js/plugins/pace/pace.min.js"></script>-->

    <!--&lt;!&ndash; iCheck &ndash;&gt;-->
    <!--<script src="/static/sfv/js/plugins/iCheck/icheck.min.js"></script>-->
        <!--<script>-->
            <!--$(document).ready(function () {-->
                <!--$('.i-checks').iCheck({-->
                    <!--checkboxClass: 'icheckbox_square-green',-->
                    <!--radioClass: 'iradio_square-green',-->
                <!--});-->
            <!--});-->
        <!--</script>-->
<!--</body>-->

<!--</html>-->


<!--&lt;!&ndash;=============================&ndash;&gt;-->

<!--&lt;!&ndash;<!DOCTYPE html>&ndash;&gt;-->
<!--&lt;!&ndash;<html>&ndash;&gt;-->
    <!--&lt;!&ndash;<head>&ndash;&gt;-->
        <!--&lt;!&ndash;<meta charset="utf-8" />&ndash;&gt;-->
        <!--&lt;!&ndash;<title>用户管理</title>&ndash;&gt;-->
    <!--&lt;!&ndash;</head>&ndash;&gt;-->
    <!--&lt;!&ndash;<body>&ndash;&gt;-->
        <!--&lt;!&ndash;<a href="/user/create/">添加用户</a>&ndash;&gt;-->
		<!--&lt;!&ndash;<a href="/logout/">退出登录</a>&ndash;&gt;-->
        <!--&lt;!&ndash;<table border="1">&ndash;&gt;-->
            <!--&lt;!&ndash;<thead>&ndash;&gt;-->
                <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                    <!--&lt;!&ndash;<th>ID</th>&ndash;&gt;-->
                    <!--&lt;!&ndash;<th>用户名</th>&ndash;&gt;-->
                    <!--&lt;!&ndash;<th>年龄</th>&ndash;&gt;-->
                    <!--&lt;!&ndash;<th>密码</th>&ndash;&gt;-->
                    <!--&lt;!&ndash;<th>操作</th>&ndash;&gt;-->
                <!--&lt;!&ndash;</tr>&ndash;&gt;-->
            <!--&lt;!&ndash;</thead>&ndash;&gt;-->
            <!--&lt;!&ndash;<tbody>&ndash;&gt;-->
                <!--&lt;!&ndash;{% for user in users %}&ndash;&gt;-->
                    <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td>{{user['id']}}</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td>{{user['name']}}</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td>{{user['age']}}</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td>******</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td>&ndash;&gt;-->
                            <!--&lt;!&ndash;<a href="/user/view/?id={{user['id']}}">编辑</a>&ndash;&gt;-->
                            <!--&lt;!&ndash;<a href="/user/delete/?id={{user['id']}}">删除</a>&ndash;&gt;-->
                        <!--&lt;!&ndash;</td>&ndash;&gt;-->

                    <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                <!--&lt;!&ndash;{% endfor %}&ndash;&gt;-->
            <!--&lt;!&ndash;</tbody>&ndash;&gt;-->
        <!--&lt;!&ndash;</table>&ndash;&gt;-->
    <!--&lt;!&ndash;</body>&ndash;&gt;-->
<!--&lt;!&ndash;</html>&ndash;&gt;-->



